---
config:
  layout: dagre
  theme: neo-dark
---
flowchart TD
    subgraph DTOs["DTOs"]
        F1["UserProfileDto.java"]
        F2["UserRatingsDto.java"]
        F3["UserFavoritesDto.java"]
    end
    subgraph Auth["Auth"]
        G1["AuthController.java"]
        G2["AuthService.java"]
        G3["AuthRepository.java"]
        G4["AuthTokenStore.java"]
    end
    subgraph Features["Features"]
        H1["favoritesController.java"]
        H2["favoritesService.java"]
        H3["favoritesRepository.java"]
        H4["ratingController.java"]
        H5["ratingService.java"]
        H6["ratingRepository.java"]
    end
    A["UserController.java"] -- ruft Service --> B["UserService.java"]
    B -- ruft Repository --> C["UserRepository.java"]
    C -- holt Daten --> D[("In-Memory: UserEntity.java")]
    C -. "sp채ter: DB-Zugriff<br>Connection.java" .-> E[("Datenbank")]
    B -- baut DTO --> F1 & F2 & F3
    B --> G4
    G1 --> G2
    G2 --> G3
    G3 --> G4
    H1 --> H2
    H2 --> H3
    H5 --> H6
    H4 --> H5
    H3 -. "sp채ter: DB-Zugriff" .-> E
    H6 -. "sp채ter: DB-Zugriff" .-> E
    G3 -. "sp채ter: DB-Zugriff" .-> E
    E:::dbfill
    classDef dbfill fill:#ffe4e1,stroke:#a45e,stroke-width:2px,color:#5a2d0c
